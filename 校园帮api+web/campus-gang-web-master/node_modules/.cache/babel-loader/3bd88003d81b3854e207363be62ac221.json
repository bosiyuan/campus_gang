{"remainingRequest":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/babel-loader/lib/index.js!/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/src/views/Android/Home/Release.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/src/views/Android/Home/Release.vue","mtime":1635704094000},{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/cache-loader/dist/cjs.js","mtime":1635870229118},{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/babel-loader/lib/index.js","mtime":1635870232549},{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/cache-loader/dist/cjs.js","mtime":1635870229118},{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/vue-loader/lib/index.js","mtime":1635870230423}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3N1bnhpYW5jaGFvL0Rlc2t0b3AvXHU2QkQ1XHU0RTFBXHU4QkJFXHU4QkExL1x1N0EwQlx1NUU4Rlx1OEJCRVx1OEJBMS9cdTY4MjFcdTU2RURcdTVFMkVhcGkrd2ViL2NhbXB1cy1nYW5nLXdlYi1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBNdXRhdGlvbnMsIG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUmVsZWFzZSIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhc2tUaXRsZTogIiIsCiAgICAgIHJld2FyZDogIiIsCiAgICAgIHRhc2tDb250ZXh0OiAiIgogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSgndXNlcicsIFsndXNlciddKSksCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcE11dGF0aW9ucyhbJ3NldEFjdGl2ZSddKSksIG1hcE11dGF0aW9ucygndXNlcicsIFsnc2V0VXNlciddKSksIHt9LCB7CiAgICBiYWNrOiBmdW5jdGlvbiBiYWNrKCkgewogICAgICBoaXN0b3J5LmJhY2soKTsKICAgIH0sCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRwb3N0KCIvdGFzayIsIHsKICAgICAgICAicHVibGlzaElkIjogdGhpcy51c2VyLmlkLAogICAgICAgICJzY2hvb2xJZCI6IHRoaXMudXNlci5zY2hvb2wuaWQsCiAgICAgICAgInJld2FyZCI6IHRoaXMucmV3YXJkLAogICAgICAgICJ0YXNrVGl0bGUiOiB0aGlzLnRhc2tUaXRsZSwKICAgICAgICAidGFza0NvbnRleHQiOiB0aGlzLnRhc2tDb250ZXh0CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMpIHsKICAgICAgICAgIF90aGlzLiRnZXQoIi91c2VyLyIgKyBfdGhpcy51c2VyLmlkKS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJ1c2VyIiwgSlNPTi5zdHJpbmdpZnkocnMuZGF0YS51c2VyKSk7CgogICAgICAgICAgICBfdGhpcy4kbXNnKHJlcy5kYXRhLm1zZywgInN1Y2Nlc3MiKTsKCiAgICAgICAgICAgIF90aGlzLnNldEFjdGl2ZSgxKTsKCiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImFjdGl2ZSIsIDEpOwoKICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiAibVRhc2siCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiRtc2cocmVzLmRhdGEubXNnLCAiZXJyb3IiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0pLAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBpZiAoIXNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSkgewogICAgICB0aGlzLiRtc2coIuaCqOWQkeacqueZu+mZhizmsqHmnInmnYPpmZAiLCAiZXJyb3IiKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9tL2xvZ2luIik7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnNldFVzZXIoSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikpKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Release.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,SAAA,YAAA,EAAA,QAAA,QAAA,MAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AAEA,MAAA,MAAA,EAAA,EAFA;AAGA,MAAA,WAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,QAAA,oBACA,QAAA,CAAA,MAAA,EAAA,CAAA,MAAA,CAAA,CADA,CATA;AAYA,EAAA,OAAA,gDACA,YAAA,CAAA,CAAA,WAAA,CAAA,CADA,GAEA,YAAA,CAAA,MAAA,EAAA,CAAA,SAAA,CAAA,CAFA;AAGA,IAAA,IAHA,kBAGA;AACA,MAAA,OAAA,CAAA,IAAA;AACA,KALA;AAMA,IAAA,QANA,sBAMA;AAAA;;AACA,WAAA,KAAA,CAAA,OAAA,EACA;AACA,qBAAA,KAAA,IAAA,CAAA,EADA;AAEA,oBAAA,KAAA,IAAA,CAAA,MAAA,CAAA,EAFA;AAGA,kBAAA,KAAA,MAHA;AAIA,qBAAA,KAAA,SAJA;AAKA,uBAAA,KAAA;AALA,OADA,EAQA,IARA,CAQA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,MAAA,EAAA;AACA,UAAA,KAAA,CAAA,IAAA,CAAA,WAAA,KAAA,CAAA,IAAA,CAAA,EAAA,EACA,IADA,CACA,UAAA,EAAA,EAAA;AACA,YAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,IAAA,CAAA,SAAA,CAAA,EAAA,CAAA,IAAA,CAAA,IAAA,CAAA;;AACA,YAAA,KAAA,CAAA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,GAAA,EAAA,SAAA;;AACA,YAAA,KAAA,CAAA,SAAA,CAAA,CAAA;;AACA,YAAA,cAAA,CAAA,OAAA,CAAA,QAAA,EAAA,CAAA;;AACA,YAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,cAAA,IAAA,EAAA;AAAA,aAAA;AACA,WAPA;AASA,SAVA,MAUA;AACA,UAAA,KAAA,CAAA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,GAAA,EAAA,OAAA;AACA;AACA,OAtBA;AAuBA;AA9BA,IAZA;AA6CA,EAAA,OA7CA,qBA6CA;AACA,QAAA,CAAA,cAAA,CAAA,OAAA,CAAA,MAAA,CAAA,EAAA;AACA,WAAA,IAAA,CAAA,YAAA,EAAA,OAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,UAAA;AACA,KAHA,MAGA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,KAAA,CAAA,cAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CAAA;AACA;AACA;AApDA,CAAA","sourcesContent":["<template>\n    <div class=\"release\">\n        <van-nav-bar title=\"发布任务\" left-text=\"返回\" left-arrow @click-left=\"back\"></van-nav-bar>\n        <div class=\"enter\">\n            <p class=\"title\">发布任务</p>\n            <van-form @submit=\"onSubmit\">\n                <van-field v-model=\"taskTitle\" label=\"任务标题\" placeholder=\"请输入任务标题\"\n                           :rules=\"[{ required: true, message: '任务标题不能为空' }]\"/>\n                <van-field v-model=\"reward\" type=\"number\" placeholder=\"请输入奖励\" label=\"奖励\"\n                           :rules=\"[{ required: true, message: '奖励不能为空' }]\">\n                    <template #extra>余额 {{user.balance}}</template>\n                </van-field>\n                <van-field\n                        v-model=\"taskContext\"\n                        rows=\"3\"\n                        autosize\n                        label=\"详细描述\"\n                        type=\"textarea\"\n                        maxlength=\"50\"\n                        placeholder=\"请输入详细描述\"\n                        show-word-limit\n                        :rules=\"[{ required: true, message: '详细描述不能为空' }]\"\n                />\n                <div style=\"margin: 16px;\">\n                    <van-button round block type=\"primary\" native-type=\"submit\">提交</van-button>\n                </div>\n            </van-form>\n        </div>\n\n    </div>\n</template>\n\n<script>\n    import {mapMutations, mapState} from 'vuex';\n\n    export default {\n        name: \"Release\",\n        data() {\n            return {\n                taskTitle: \"\",\n                reward: \"\",\n                taskContext: \"\"\n            }\n        },\n        computed: {\n            ...mapState('user', ['user'])\n        },\n        methods: {\n            ...mapMutations(['setActive']),\n            ...mapMutations('user', ['setUser']),\n            back() {\n                history.back()\n            },\n            onSubmit() {\n                this.$post(\"/task\",\n                    {\n                        \"publishId\": this.user.id,\n                        \"schoolId\": this.user.school.id,\n                        \"reward\": this.reward,\n                        \"taskTitle\": this.taskTitle,\n                        \"taskContext\": this.taskContext\n                    }\n                ).then(res => {\n                    if (res.data.status) {\n                        this.$get(\"/user/\" + this.user.id)\n                            .then((rs) => {\n                                sessionStorage.setItem(\"user\", JSON.stringify(rs.data.user))\n                                this.$msg(res.data.msg, \"success\")\n                                this.setActive(1)\n                                sessionStorage.setItem(\"active\", 1)\n                                this.$router.push({name: \"mTask\"})\n                            })\n\n                    } else {\n                        this.$msg(res.data.msg, \"error\")\n                    }\n                })\n            },\n\n        },\n        created() {\n            if (!sessionStorage.getItem('user')) {\n                this.$msg(\"您向未登陆,没有权限\", \"error\")\n                this.$router.push(\"/m/login\")\n            } else {\n                this.setUser(JSON.parse(sessionStorage.getItem(\"user\")))\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .title {\n        background-color: #f4f4f5;\n        color: #909399;\n        padding: 5px 16px;\n        font-size: 13px;\n    }\n</style>"],"sourceRoot":"src/views/Android/Home"}]}