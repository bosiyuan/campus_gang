{"remainingRequest":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/babel-loader/lib/index.js!/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/src/views/Android/Home/PerfectInformation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/src/views/Android/Home/PerfectInformation.vue","mtime":1635704094000},{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/cache-loader/dist/cjs.js","mtime":1635870229118},{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/babel-loader/lib/index.js","mtime":1635870232549},{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/cache-loader/dist/cjs.js","mtime":1635870229118},{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/vue-loader/lib/index.js","mtime":1635870230423}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3N1bnhpYW5jaGFvL0Rlc2t0b3AvXHU2QkQ1XHU0RTFBXHU4QkJFXHU4QkExL1x1N0EwQlx1NUU4Rlx1OEJCRVx1OEJBMS9cdTY4MjFcdTU2RURcdTVFMkVhcGkrd2ViL2NhbXB1cy1nYW5nLXdlYi1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcE11dGF0aW9ucywgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQZXJmZWN0SW5mb3JtYXRpb24iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93OiBmYWxzZSwKICAgICAgLy8g5pi+56S65a2X5L2TCiAgICAgIGZpZWxkVmFsdWU6ICcnLAogICAgICAvLyDpgInmi6nnmoTnj63nuqcKICAgICAgY2FzY2FkZXJWYWx1ZTogW10sCiAgICAgIC8vIOmAiemhueWIl+ihqO+8jGNoaWxkcmVuIOS7o+ihqOWtkOmAiemhue+8jOaUr+aMgeWkmue6p+W1jOWllwogICAgICBmaWVsZE5hbWVzOiB7CiAgICAgICAgdGV4dDogJ25hbWUnLAogICAgICAgIHZhbHVlOiAnaWQnLAogICAgICAgIGNoaWxkcmVuOiAnY2xhc3NlcycKICAgICAgfSwKICAgICAgdXNlcm5hbWU6ICIiLAogICAgICBwaG9uZTogIiIsCiAgICAgIC8v54+t57qnCiAgICAgIGRlcHQ6IFtdLAogICAgICBzZXg6ICcwJwogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSgndXNlcicsIFsndXNlciddKSksCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBNdXRhdGlvbnMoJ3VzZXInLCBbJ3NldFVzZXInXSkpLCB7fSwgewogICAgb25GaW5pc2g6IGZ1bmN0aW9uIG9uRmluaXNoKF9yZWYpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBzZWxlY3RlZE9wdGlvbnMgPSBfcmVmLnNlbGVjdGVkT3B0aW9uczsKICAgICAgdGhpcy5zaG93ID0gZmFsc2U7CiAgICAgIHRoaXMuZmllbGRWYWx1ZSA9IHNlbGVjdGVkT3B0aW9ucy5tYXAoZnVuY3Rpb24gKG9wdGlvbikgewogICAgICAgIHJldHVybiBvcHRpb24ubmFtZTsKICAgICAgfSkuam9pbignLycpOwogICAgICBzZWxlY3RlZE9wdGlvbnMubWFwKGZ1bmN0aW9uIChvcHRpb24pIHsKICAgICAgICBfdGhpcy5jYXNjYWRlclZhbHVlLnB1c2gob3B0aW9uLmlkKTsKICAgICAgfSk7CiAgICB9LAogICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmNhc2NhZGVyVmFsdWUubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuJHB1dCgiL3VzZXIiLCB7CiAgICAgICAgICBpZDogdGhpcy51c2VyLmlkLAogICAgICAgICAgImRlcHRJZCI6IHRoaXMuY2FzY2FkZXJWYWx1ZVswXSwKICAgICAgICAgICJjbGFzc0lkIjogdGhpcy5jYXNjYWRlclZhbHVlWzFdLAogICAgICAgICAgInVzZXJuYW1lIjogdGhpcy51c2VybmFtZSwKICAgICAgICAgICJwaG9uZSI6IHRoaXMucGhvbmUsCiAgICAgICAgICAnc2V4JzogdGhpcy5zZXgKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzMi4kZ2V0KCIvdXNlci8iICsgX3RoaXMyLnVzZXIuaWQpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInVzZXIiLCBKU09OLnN0cmluZ2lmeShycy5kYXRhLnVzZXIpKTsKCiAgICAgICAgICAgIF90aGlzMi5zZXRVc2VyKEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpKSk7CgogICAgICAgICAgICBfdGhpczIuJG1zZyhyZXMuZGF0YS5tc2csICdzdWNjZXNzJyk7CgogICAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiAnbUhvbWUnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbXNnKCLor7fpgInmi6nlrabmoKEiLCAiZXJyb3IiKTsKICAgICAgfQogICAgfQogIH0pLAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICB0aGlzLnNldFVzZXIoSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikpKTsKICAgIHRoaXMuJGdldCgiL3NjaG9vbC8iICsgdGhpcy51c2VyLnNjaG9vbC5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIF90aGlzMy5kZXB0ID0gcmVzLmRhdGEuc2Nob29sLmRlcHRzOyAvLyBjb25zb2xlLmxvZyh0aGlzLmRlcHQpCiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["PerfectInformation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,SAAA,YAAA,EAAA,QAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,oBADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA;AACA,MAAA,UAAA,EAAA,EAHA;AAIA;AACA,MAAA,aAAA,EAAA,EALA;AAMA;AACA,MAAA,UAAA,EAAA;AACA,QAAA,IAAA,EAAA,MADA;AAEA,QAAA,KAAA,EAAA,IAFA;AAGA,QAAA,QAAA,EAAA;AAHA,OAPA;AAYA,MAAA,QAAA,EAAA,EAZA;AAaA,MAAA,KAAA,EAAA,EAbA;AAcA;AACA,MAAA,IAAA,EAAA,EAfA;AAgBA,MAAA,GAAA,EAAA;AAhBA,KAAA;AAkBA,GArBA;AAsBA,EAAA,QAAA,oBACA,QAAA,CAAA,MAAA,EAAA,CAAA,MAAA,CAAA,CADA,CAtBA;AAyBA,EAAA,OAAA,kCACA,YAAA,CAAA,MAAA,EAAA,CAAA,SAAA,CAAA,CADA;AAEA,IAAA,QAFA,0BAEA;AAAA;;AAAA,UAAA,eAAA,QAAA,eAAA;AACA,WAAA,IAAA,GAAA,KAAA;AACA,WAAA,UAAA,GAAA,eAAA,CAAA,GAAA,CAAA,UAAA,MAAA;AAAA,eAAA,MAAA,CAAA,IAAA;AAAA,OAAA,EAAA,IAAA,CAAA,GAAA,CAAA;AACA,MAAA,eAAA,CAAA,GAAA,CAAA,UAAA,MAAA,EAAA;AACA,QAAA,KAAA,CAAA,aAAA,CAAA,IAAA,CAAA,MAAA,CAAA,EAAA;AACA,OAFA;AAGA,KARA;AASA,IAAA,QATA,sBASA;AAAA;;AACA,UAAA,KAAA,aAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,IAAA,CAAA,OAAA,EACA;AACA,UAAA,EAAA,EAAA,KAAA,IAAA,CAAA,EADA;AAEA,oBAAA,KAAA,aAAA,CAAA,CAAA,CAFA;AAGA,qBAAA,KAAA,aAAA,CAAA,CAAA,CAHA;AAIA,sBAAA,KAAA,QAJA;AAKA,mBAAA,KAAA,KALA;AAMA,iBAAA,KAAA;AANA,SADA,EASA,IATA,CASA,UAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,WAAA,MAAA,CAAA,IAAA,CAAA,EAAA,EACA,IADA,CACA,UAAA,EAAA,EAAA;AACA,YAAA,cAAA,CAAA,OAAA,CAAA,MAAA,EAAA,IAAA,CAAA,SAAA,CAAA,EAAA,CAAA,IAAA,CAAA,IAAA,CAAA;;AACA,YAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,KAAA,CAAA,cAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CAAA;;AACA,YAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,GAAA,EAAA,SAAA;;AACA,YAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,cAAA,IAAA,EAAA;AAAA,aAAA;AACA,WANA;AAOA,SAjBA;AAkBA,OAnBA,MAmBA;AACA,aAAA,IAAA,CAAA,OAAA,EAAA,OAAA;AACA;AACA;AAhCA,IAzBA;AA4DA,EAAA,OA5DA,qBA4DA;AAAA;;AACA,SAAA,OAAA,CAAA,IAAA,CAAA,KAAA,CAAA,cAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CAAA;AACA,SAAA,IAAA,CAAA,aAAA,KAAA,IAAA,CAAA,MAAA,CAAA,EAAA,EACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,MAAA,MAAA,CAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,MAAA,CAAA,KAAA,CADA,CAEA;AACA,KAJA;AAKA;AAnEA,CAAA","sourcesContent":["<template>\n    <div class=\"perfectInformation\">\n        <h3>请完善信息</h3>\n        <van-form @submit=\"onSubmit\">\n            <van-field\n                    v-model=\"fieldValue\"\n                    is-link\n                    label=\"班级\"\n                    placeholder=\"请选择所在班级\"\n                    @click=\"show = true\"\n            />\n            <van-popup v-model=\"show\" round position=\"bottom\">\n                <van-cascader\n                        title=\"请选择所在班级\"\n                        :options=\"dept\"\n                        @close=\"show = false\"\n                        @finish=\"onFinish\"\n                        :field-names=\"fieldNames\"\n                />\n            </van-popup>\n            <van-field v-model=\"username\" label=\"姓名\" placeholder=\"请输入姓名\"\n                       :rules=\"[{ required: true, message: '姓名不能为空' }]\"/>\n            <van-field v-model=\"phone\" type=\"tel\" label=\"手机号\" placeholder=\"请输入手机号\"\n                       :rules=\"[{ required: true, message: '手机号不能为空' }]\"/>\n            <van-radio-group v-model=\"sex\" direction=\"horizontal\" style=\"margin: 8px 0 5px 15px\">\n                <van-radio name=\"0\">男</van-radio>\n                <van-radio name=\"1\">女</van-radio>\n            </van-radio-group>\n            <div style=\"margin: 16px;\">\n                <van-button round block type=\"primary\" native-type=\"submit\">提交</van-button>\n            </div>\n        </van-form>\n    </div>\n</template>\n\n<script>\n    import {mapMutations, mapState} from \"vuex\";\n    export default {\n        name: \"PerfectInformation\",\n        data() {\n            return {\n                show: false,\n                // 显示字体\n                fieldValue: '',\n                // 选择的班级\n                cascaderValue: [],\n                // 选项列表，children 代表子选项，支持多级嵌套\n                fieldNames: {\n                    text: 'name',\n                    value: 'id',\n                    children: 'classes',\n                },\n                username: \"\",\n                phone: \"\",\n                //班级\n                dept:[],\n                sex:'0'\n            }\n        },\n        computed:{\n            ...mapState('user', ['user'])\n        },\n        methods: {\n            ...mapMutations('user', ['setUser']),\n            onFinish({selectedOptions}) {\n                this.show = false;\n                this.fieldValue = selectedOptions.map((option) => option.name).join('/');\n                selectedOptions.map((option) => {\n                    this.cascaderValue.push(option.id)\n                })\n            },\n            onSubmit() {\n                if (this.cascaderValue.length > 0){\n                    this.$put(\"/user\",\n                        {\n                            id: this.user.id,\n                            \"deptId\": this.cascaderValue[0],\n                            \"classId\": this.cascaderValue[1],\n                            \"username\": this.username,\n                            \"phone\": this.phone,\n                            'sex' : this.sex\n                        })\n                    .then(res => {\n                        this.$get(\"/user/\" + this.user.id)\n                        .then((rs) => {\n                            sessionStorage.setItem(\"user\", JSON.stringify(rs.data.user))\n                            this.setUser(JSON.parse(sessionStorage.getItem(\"user\")))\n                            this.$msg(res.data.msg,'success')\n                            this.$router.push({name:'mHome'})\n                        })\n                    })\n                }else {\n                    this.$msg(\"请选择学校\",\"error\")\n                }\n            },\n\n        },\n        created() {\n            this.setUser(JSON.parse(sessionStorage.getItem(\"user\")))\n            this.$get(\"/school/\" + this.user.school.id)\n            .then((res) => {\n                this.dept = res.data.school.depts\n                // console.log(this.dept)\n            })\n        }\n    }\n</script>\n\n<style scoped>\n    .perfectInformation{\n        height: 100vh;\n        background: white;\n    }\n    .perfectInformation h3{\n        text-align: center;background: white;padding: 15px;font-weight: normal;border-bottom: 1px solid rgb(237 237 237)\n    }\n    /deep/ .van-field__label{\n        width: 3.5em;\n    }\n</style>"],"sourceRoot":"src/views/Android/Home"}]}