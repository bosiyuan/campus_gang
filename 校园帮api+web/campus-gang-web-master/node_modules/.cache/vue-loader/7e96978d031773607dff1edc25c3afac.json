{"remainingRequest":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/src/views/Android/Home/Release.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/src/views/Android/Home/Release.vue","mtime":1635704094000},{"path":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/node_modules/babel-loader/lib/index.js","mtime":1635870232549},{"path":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/node_modules/cache-loader/dist/cjs.js","mtime":1635870229118},{"path":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/node_modules/vue-loader/lib/index.js","mtime":1635870230423}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWFwTXV0YXRpb25zLCBtYXBTdGF0ZX0gZnJvbSAndnVleCc7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiUmVsZWFzZSIsCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRhc2tUaXRsZTogIiIsCiAgICAgICAgICAgIHJld2FyZDogIiIsCiAgICAgICAgICAgIHRhc2tDb250ZXh0OiAiIgogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIC4uLm1hcFN0YXRlKCd1c2VyJywgWyd1c2VyJ10pCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC4uLm1hcE11dGF0aW9ucyhbJ3NldEFjdGl2ZSddKSwKICAgICAgICAuLi5tYXBNdXRhdGlvbnMoJ3VzZXInLCBbJ3NldFVzZXInXSksCiAgICAgICAgYmFjaygpIHsKICAgICAgICAgICAgaGlzdG9yeS5iYWNrKCkKICAgICAgICB9LAogICAgICAgIG9uU3VibWl0KCkgewogICAgICAgICAgICB0aGlzLiRwb3N0KCIvdGFzayIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgInB1Ymxpc2hJZCI6IHRoaXMudXNlci5pZCwKICAgICAgICAgICAgICAgICAgICAic2Nob29sSWQiOiB0aGlzLnVzZXIuc2Nob29sLmlkLAogICAgICAgICAgICAgICAgICAgICJyZXdhcmQiOiB0aGlzLnJld2FyZCwKICAgICAgICAgICAgICAgICAgICAidGFza1RpdGxlIjogdGhpcy50YXNrVGl0bGUsCiAgICAgICAgICAgICAgICAgICAgInRhc2tDb250ZXh0IjogdGhpcy50YXNrQ29udGV4dAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRnZXQoIi91c2VyLyIgKyB0aGlzLnVzZXIuaWQpCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChycykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidXNlciIsIEpTT04uc3RyaW5naWZ5KHJzLmRhdGEudXNlcikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtc2cocmVzLmRhdGEubXNnLCAic3VjY2VzcyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZSgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiYWN0aXZlIiwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAibVRhc2sifSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1zZyhyZXMuZGF0YS5tc2csICJlcnJvciIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKCiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICBpZiAoIXNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSkgewogICAgICAgICAgICB0aGlzLiRtc2coIuaCqOWQkeacqueZu+mZhizmsqHmnInmnYPpmZAiLCAiZXJyb3IiKQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL20vbG9naW4iKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuc2V0VXNlcihKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKSkpCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Release.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Release.vue","sourceRoot":"src/views/Android/Home","sourcesContent":["<template>\n    <div class=\"release\">\n        <van-nav-bar title=\"发布任务\" left-text=\"返回\" left-arrow @click-left=\"back\"></van-nav-bar>\n        <div class=\"enter\">\n            <p class=\"title\">发布任务</p>\n            <van-form @submit=\"onSubmit\">\n                <van-field v-model=\"taskTitle\" label=\"任务标题\" placeholder=\"请输入任务标题\"\n                           :rules=\"[{ required: true, message: '任务标题不能为空' }]\"/>\n                <van-field v-model=\"reward\" type=\"number\" placeholder=\"请输入奖励\" label=\"奖励\"\n                           :rules=\"[{ required: true, message: '奖励不能为空' }]\">\n                    <template #extra>余额 {{user.balance}}</template>\n                </van-field>\n                <van-field\n                        v-model=\"taskContext\"\n                        rows=\"3\"\n                        autosize\n                        label=\"详细描述\"\n                        type=\"textarea\"\n                        maxlength=\"50\"\n                        placeholder=\"请输入详细描述\"\n                        show-word-limit\n                        :rules=\"[{ required: true, message: '详细描述不能为空' }]\"\n                />\n                <div style=\"margin: 16px;\">\n                    <van-button round block type=\"primary\" native-type=\"submit\">提交</van-button>\n                </div>\n            </van-form>\n        </div>\n\n    </div>\n</template>\n\n<script>\n    import {mapMutations, mapState} from 'vuex';\n\n    export default {\n        name: \"Release\",\n        data() {\n            return {\n                taskTitle: \"\",\n                reward: \"\",\n                taskContext: \"\"\n            }\n        },\n        computed: {\n            ...mapState('user', ['user'])\n        },\n        methods: {\n            ...mapMutations(['setActive']),\n            ...mapMutations('user', ['setUser']),\n            back() {\n                history.back()\n            },\n            onSubmit() {\n                this.$post(\"/task\",\n                    {\n                        \"publishId\": this.user.id,\n                        \"schoolId\": this.user.school.id,\n                        \"reward\": this.reward,\n                        \"taskTitle\": this.taskTitle,\n                        \"taskContext\": this.taskContext\n                    }\n                ).then(res => {\n                    if (res.data.status) {\n                        this.$get(\"/user/\" + this.user.id)\n                            .then((rs) => {\n                                sessionStorage.setItem(\"user\", JSON.stringify(rs.data.user))\n                                this.$msg(res.data.msg, \"success\")\n                                this.setActive(1)\n                                sessionStorage.setItem(\"active\", 1)\n                                this.$router.push({name: \"mTask\"})\n                            })\n\n                    } else {\n                        this.$msg(res.data.msg, \"error\")\n                    }\n                })\n            },\n\n        },\n        created() {\n            if (!sessionStorage.getItem('user')) {\n                this.$msg(\"您向未登陆,没有权限\", \"error\")\n                this.$router.push(\"/m/login\")\n            } else {\n                this.setUser(JSON.parse(sessionStorage.getItem(\"user\")))\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .title {\n        background-color: #f4f4f5;\n        color: #909399;\n        padding: 5px 16px;\n        font-size: 13px;\n    }\n</style>"]}]}