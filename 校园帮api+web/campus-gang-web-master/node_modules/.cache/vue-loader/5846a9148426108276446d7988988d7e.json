{"remainingRequest":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/src/views/Android/Home/PerfectInformation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/src/views/Android/Home/PerfectInformation.vue","mtime":1635704094000},{"path":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/node_modules/babel-loader/lib/index.js","mtime":1635870232549},{"path":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/node_modules/cache-loader/dist/cjs.js","mtime":1635870229118},{"path":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/node_modules/vue-loader/lib/index.js","mtime":1635870230423}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWFwTXV0YXRpb25zLCBtYXBTdGF0ZX0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJQZXJmZWN0SW5mb3JtYXRpb24iLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzaG93OiBmYWxzZSwKICAgICAgICAgICAgLy8g5pi+56S65a2X5L2TCiAgICAgICAgICAgIGZpZWxkVmFsdWU6ICcnLAogICAgICAgICAgICAvLyDpgInmi6nnmoTnj63nuqcKICAgICAgICAgICAgY2FzY2FkZXJWYWx1ZTogW10sCiAgICAgICAgICAgIC8vIOmAiemhueWIl+ihqO+8jGNoaWxkcmVuIOS7o+ihqOWtkOmAiemhue+8jOaUr+aMgeWkmue6p+W1jOWllwogICAgICAgICAgICBmaWVsZE5hbWVzOiB7CiAgICAgICAgICAgICAgICB0ZXh0OiAnbmFtZScsCiAgICAgICAgICAgICAgICB2YWx1ZTogJ2lkJywKICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAnY2xhc3NlcycsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgICAgICAgcGhvbmU6ICIiLAogICAgICAgICAgICAvL+ePree6pwogICAgICAgICAgICBkZXB0OltdLAogICAgICAgICAgICBzZXg6JzAnCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOnsKICAgICAgICAuLi5tYXBTdGF0ZSgndXNlcicsIFsndXNlciddKQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAuLi5tYXBNdXRhdGlvbnMoJ3VzZXInLCBbJ3NldFVzZXInXSksCiAgICAgICAgb25GaW5pc2goe3NlbGVjdGVkT3B0aW9uc30pIHsKICAgICAgICAgICAgdGhpcy5zaG93ID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuZmllbGRWYWx1ZSA9IHNlbGVjdGVkT3B0aW9ucy5tYXAoKG9wdGlvbikgPT4gb3B0aW9uLm5hbWUpLmpvaW4oJy8nKTsKICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb25zLm1hcCgob3B0aW9uKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmNhc2NhZGVyVmFsdWUucHVzaChvcHRpb24uaWQpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBvblN1Ym1pdCgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuY2FzY2FkZXJWYWx1ZS5sZW5ndGggPiAwKXsKICAgICAgICAgICAgICAgIHRoaXMuJHB1dCgiL3VzZXIiLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMudXNlci5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgImRlcHRJZCI6IHRoaXMuY2FzY2FkZXJWYWx1ZVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzSWQiOiB0aGlzLmNhc2NhZGVyVmFsdWVbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICJ1c2VybmFtZSI6IHRoaXMudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICJwaG9uZSI6IHRoaXMucGhvbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICdzZXgnIDogdGhpcy5zZXgKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRnZXQoIi91c2VyLyIgKyB0aGlzLnVzZXIuaWQpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInVzZXIiLCBKU09OLnN0cmluZ2lmeShycy5kYXRhLnVzZXIpKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFVzZXIoSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikpKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtc2cocmVzLmRhdGEubXNnLCdzdWNjZXNzJykKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6J21Ib21lJ30pCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1zZygi6K+36YCJ5oup5a2m5qChIiwiZXJyb3IiKQogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICB0aGlzLnNldFVzZXIoSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikpKQogICAgICAgIHRoaXMuJGdldCgiL3NjaG9vbC8iICsgdGhpcy51c2VyLnNjaG9vbC5pZCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMuZGVwdCA9IHJlcy5kYXRhLnNjaG9vbC5kZXB0cwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmRlcHQpCiAgICAgICAgfSkKICAgIH0KfQo="},{"version":3,"sources":["PerfectInformation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PerfectInformation.vue","sourceRoot":"src/views/Android/Home","sourcesContent":["<template>\n    <div class=\"perfectInformation\">\n        <h3>请完善信息</h3>\n        <van-form @submit=\"onSubmit\">\n            <van-field\n                    v-model=\"fieldValue\"\n                    is-link\n                    label=\"班级\"\n                    placeholder=\"请选择所在班级\"\n                    @click=\"show = true\"\n            />\n            <van-popup v-model=\"show\" round position=\"bottom\">\n                <van-cascader\n                        title=\"请选择所在班级\"\n                        :options=\"dept\"\n                        @close=\"show = false\"\n                        @finish=\"onFinish\"\n                        :field-names=\"fieldNames\"\n                />\n            </van-popup>\n            <van-field v-model=\"username\" label=\"姓名\" placeholder=\"请输入姓名\"\n                       :rules=\"[{ required: true, message: '姓名不能为空' }]\"/>\n            <van-field v-model=\"phone\" type=\"tel\" label=\"手机号\" placeholder=\"请输入手机号\"\n                       :rules=\"[{ required: true, message: '手机号不能为空' }]\"/>\n            <van-radio-group v-model=\"sex\" direction=\"horizontal\" style=\"margin: 8px 0 5px 15px\">\n                <van-radio name=\"0\">男</van-radio>\n                <van-radio name=\"1\">女</van-radio>\n            </van-radio-group>\n            <div style=\"margin: 16px;\">\n                <van-button round block type=\"primary\" native-type=\"submit\">提交</van-button>\n            </div>\n        </van-form>\n    </div>\n</template>\n\n<script>\n    import {mapMutations, mapState} from \"vuex\";\n    export default {\n        name: \"PerfectInformation\",\n        data() {\n            return {\n                show: false,\n                // 显示字体\n                fieldValue: '',\n                // 选择的班级\n                cascaderValue: [],\n                // 选项列表，children 代表子选项，支持多级嵌套\n                fieldNames: {\n                    text: 'name',\n                    value: 'id',\n                    children: 'classes',\n                },\n                username: \"\",\n                phone: \"\",\n                //班级\n                dept:[],\n                sex:'0'\n            }\n        },\n        computed:{\n            ...mapState('user', ['user'])\n        },\n        methods: {\n            ...mapMutations('user', ['setUser']),\n            onFinish({selectedOptions}) {\n                this.show = false;\n                this.fieldValue = selectedOptions.map((option) => option.name).join('/');\n                selectedOptions.map((option) => {\n                    this.cascaderValue.push(option.id)\n                })\n            },\n            onSubmit() {\n                if (this.cascaderValue.length > 0){\n                    this.$put(\"/user\",\n                        {\n                            id: this.user.id,\n                            \"deptId\": this.cascaderValue[0],\n                            \"classId\": this.cascaderValue[1],\n                            \"username\": this.username,\n                            \"phone\": this.phone,\n                            'sex' : this.sex\n                        })\n                    .then(res => {\n                        this.$get(\"/user/\" + this.user.id)\n                        .then((rs) => {\n                            sessionStorage.setItem(\"user\", JSON.stringify(rs.data.user))\n                            this.setUser(JSON.parse(sessionStorage.getItem(\"user\")))\n                            this.$msg(res.data.msg,'success')\n                            this.$router.push({name:'mHome'})\n                        })\n                    })\n                }else {\n                    this.$msg(\"请选择学校\",\"error\")\n                }\n            },\n\n        },\n        created() {\n            this.setUser(JSON.parse(sessionStorage.getItem(\"user\")))\n            this.$get(\"/school/\" + this.user.school.id)\n            .then((res) => {\n                this.dept = res.data.school.depts\n                // console.log(this.dept)\n            })\n        }\n    }\n</script>\n\n<style scoped>\n    .perfectInformation{\n        height: 100vh;\n        background: white;\n    }\n    .perfectInformation h3{\n        text-align: center;background: white;padding: 15px;font-weight: normal;border-bottom: 1px solid rgb(237 237 237)\n    }\n    /deep/ .van-field__label{\n        width: 3.5em;\n    }\n</style>"]}]}