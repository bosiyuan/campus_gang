{"remainingRequest":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/src/components/Android/LoginInput.vue?vue&type=style&index=0&id=2ff9136e&scoped=true&lang=less&","dependencies":[{"path":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/src/components/Android/LoginInput.vue","mtime":1635704094000},{"path":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/node_modules/css-loader/dist/cjs.js","mtime":1635870230221},{"path":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1635870230630},{"path":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/node_modules/postcss-loader/src/index.js","mtime":1635870229800},{"path":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/node_modules/less-loader/dist/cjs.js","mtime":1635870231690},{"path":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/node_modules/cache-loader/dist/cjs.js","mtime":1635870229118},{"path":"/Users/sunxianchao/Desktop/SpringBoot/项目/源项目/校园跑腿/源文件/2/campus-gang-web-master/node_modules/vue-loader/lib/index.js","mtime":1635870230423}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgovZGVlcC8gLnZhbi1maWVsZF9fbGVmdC1pY29uIHsKICAgIG1hcmdpbi1yaWdodDogMTVweCAhaW1wb3J0YW50Owp9CgoudmFuLWNlbGwgewogICAgcGFkZGluZzogMTVweCAwOwp9CgoudmFuLWJ1dHRvbiB7CiAgICBiYWNrZ3JvdW5kOiAjOGE5N2Y2OwogICAgY29sb3I6ICNmZmY7Cn0KCi52YW4tY2hlY2tib3ggewogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7Cn0KCi9kZWVwLyAudmFuLWNoZWNrYm94X19pY29uIHsKICAgIGZvbnQtc2l6ZTogMTZweDsKCiAgICBhIHsKICAgICAgICBjb2xvcjogcmVkOwogICAgfQp9Cg=="},{"version":3,"sources":["LoginInput.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA","file":"LoginInput.vue","sourceRoot":"src/components/Android","sourcesContent":["<template>\n\n    <van-form @submit=\"onSubmit\">\n        <van-field\n                v-model=\"studentId\"\n                name=\"学号\"\n                left-icon=\"friends-o\"\n                placeholder=\"请输入学号\"\n                :rules=\"[{ required: true, message: '请填写用户名' }]\"\n        />\n        <van-field\n                v-model=\"password\"\n                type=\"password\"\n                name=\"密码\"\n                left-icon=\"closed-eye\"\n                placeholder=\"请输入密码\"\n                :rules=\"[{ required: true, message: '请填写密码' }]\"\n        />\n        <van-field\n                readonly\n                clickable\n                name=\"picker\"\n                :value=\"value\"\n                left-icon=\"newspaper-o\"\n                placeholder=\"点击选择学校\"\n                @click=\"showPicker = true\"\n        />\n        <van-popup v-model=\"showPicker\" position=\"bottom\">\n            <van-picker\n                    show-toolbar\n                    :columns=\"school\"\n                    value-key=\"name\"\n                    @confirm=\"onConfirm\"\n                    @cancel=\"showPicker = false\"\n            />\n        </van-popup>\n        <slot name=\"prompt\"></slot>\n        <div style=\"margin: 16px 0;\">\n            <van-button round block native-type=\"submit\">\n                {{btn}}\n            </van-button>\n        </div>\n        <van-checkbox v-model=\"checked\" style=\"font-size: 10px\">已同意<a href=\"#\" style=\"color: red\">《平台登陆协议》</a>及<a\n                href=\"#\" style=\"color: red\">《隐私政策》</a></van-checkbox>\n    </van-form>\n</template>\n\n<script>\n    export default {\n        name: \"LoginInput\",\n        props:['btn'],\n        data() {\n            return {\n                studentId: '',\n                password: '',\n                value: '',\n                schoolId:\"\",\n                school: [],\n                showPicker: false,\n                checked: true,\n            }\n        },\n        methods: {\n            onConfirm(value) {\n                this.value = value.name;\n                this.schoolId = value.id\n                this.showPicker = false;\n            },\n            onSubmit() {\n                if (this.value != \"\" && this.checked){\n                    if (this.btn === '登录'){\n                        this.$get(\"/user/login\",\n                            {\"studentId\": this.studentId, \"password\": this.$md5(this.password), \"schoolId\": this.schoolId})\n                        .then(res=>{\n                            if (res.data.status) {\n                                if (res.data.user.state == 0){\n                                    let accountOrName = res.data.user.username?res.data.user.username:res.data.user.studentId;\n                                    //存储数据到sessionStorage\n                                    sessionStorage.setItem(\"user\",JSON.stringify(res.data.user));\n                                    this.$msg(accountOrName + \"，登录成功\", \"success\")\n                                    this.$router.push('/m/home')\n                                }else {\n                                    this.$msg('该用户已被冻结，请联系管理员', \"error\")\n                                }\n                            } else {\n                                this.$msg(res.data.msg, \"error\")\n                            }\n                        })\n                    }else {\n                        this.$post(\"/user\",\n                            {\"studentId\": this.studentId, \"password\": this.$md5(this.password), \"schoolId\": this.schoolId}\n                        ).then((res) => {\n                            if (res.data.status) {\n                                this.$msg(res.data.msg, \"success\")\n                                this.$router.push('/m/login')\n                            } else {\n                                this.$msg(res.data.msg, \"error\")\n                            }\n                        })\n                    }\n\n                }else if (this.value == ''){\n                    this.$msg(\"请选择学校\",\"error\")\n                }else {\n                    this.$msg(\"请勾选用户协议\",\"error\")\n                }\n            },\n        },\n        created() {\n            this.$get(\"/school\")\n            .then((res) => {\n                // console.log(res.data.schools)\n                this.school = res.data.school\n            })\n        }\n    }\n</script>\n\n<style scoped lang=\"less\">\n    /deep/ .van-field__left-icon {\n        margin-right: 15px !important;\n    }\n\n    .van-cell {\n        padding: 15px 0;\n    }\n\n    .van-button {\n        background: #8a97f6;\n        color: #fff;\n    }\n\n    .van-checkbox {\n        justify-content: center;\n    }\n\n    /deep/ .van-checkbox__icon {\n        font-size: 16px;\n\n        a {\n            color: red;\n        }\n    }\n</style>"]}]}