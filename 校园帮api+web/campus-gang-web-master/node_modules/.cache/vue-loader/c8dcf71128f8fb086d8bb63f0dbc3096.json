{"remainingRequest":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/src/views/Android/Home/PerfectInformation.vue?vue&type=style&index=0&id=2c5218b6&scoped=true&lang=css&","dependencies":[{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/src/views/Android/Home/PerfectInformation.vue","mtime":1635704094000},{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/css-loader/dist/cjs.js","mtime":1635870230221},{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1635870230630},{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/postcss-loader/src/index.js","mtime":1635870229800},{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/cache-loader/dist/cjs.js","mtime":1635870229118},{"path":"/Users/sunxianchao/Desktop/毕业设计/程序设计/校园帮api+web/campus-gang-web-master/node_modules/vue-loader/lib/index.js","mtime":1635870230423}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5wZXJmZWN0SW5mb3JtYXRpb257CiAgICBoZWlnaHQ6IDEwMHZoOwogICAgYmFja2dyb3VuZDogd2hpdGU7Cn0KLnBlcmZlY3RJbmZvcm1hdGlvbiBoM3sKICAgIHRleHQtYWxpZ246IGNlbnRlcjtiYWNrZ3JvdW5kOiB3aGl0ZTtwYWRkaW5nOiAxNXB4O2ZvbnQtd2VpZ2h0OiBub3JtYWw7Ym9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYigyMzcgMjM3IDIzNykKfQovZGVlcC8gLnZhbi1maWVsZF9fbGFiZWx7CiAgICB3aWR0aDogMy41ZW07Cn0K"},{"version":3,"sources":["PerfectInformation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PerfectInformation.vue","sourceRoot":"src/views/Android/Home","sourcesContent":["<template>\n    <div class=\"perfectInformation\">\n        <h3>请完善信息</h3>\n        <van-form @submit=\"onSubmit\">\n            <van-field\n                    v-model=\"fieldValue\"\n                    is-link\n                    label=\"班级\"\n                    placeholder=\"请选择所在班级\"\n                    @click=\"show = true\"\n            />\n            <van-popup v-model=\"show\" round position=\"bottom\">\n                <van-cascader\n                        title=\"请选择所在班级\"\n                        :options=\"dept\"\n                        @close=\"show = false\"\n                        @finish=\"onFinish\"\n                        :field-names=\"fieldNames\"\n                />\n            </van-popup>\n            <van-field v-model=\"username\" label=\"姓名\" placeholder=\"请输入姓名\"\n                       :rules=\"[{ required: true, message: '姓名不能为空' }]\"/>\n            <van-field v-model=\"phone\" type=\"tel\" label=\"手机号\" placeholder=\"请输入手机号\"\n                       :rules=\"[{ required: true, message: '手机号不能为空' }]\"/>\n            <van-radio-group v-model=\"sex\" direction=\"horizontal\" style=\"margin: 8px 0 5px 15px\">\n                <van-radio name=\"0\">男</van-radio>\n                <van-radio name=\"1\">女</van-radio>\n            </van-radio-group>\n            <div style=\"margin: 16px;\">\n                <van-button round block type=\"primary\" native-type=\"submit\">提交</van-button>\n            </div>\n        </van-form>\n    </div>\n</template>\n\n<script>\n    import {mapMutations, mapState} from \"vuex\";\n    export default {\n        name: \"PerfectInformation\",\n        data() {\n            return {\n                show: false,\n                // 显示字体\n                fieldValue: '',\n                // 选择的班级\n                cascaderValue: [],\n                // 选项列表，children 代表子选项，支持多级嵌套\n                fieldNames: {\n                    text: 'name',\n                    value: 'id',\n                    children: 'classes',\n                },\n                username: \"\",\n                phone: \"\",\n                //班级\n                dept:[],\n                sex:'0'\n            }\n        },\n        computed:{\n            ...mapState('user', ['user'])\n        },\n        methods: {\n            ...mapMutations('user', ['setUser']),\n            onFinish({selectedOptions}) {\n                this.show = false;\n                this.fieldValue = selectedOptions.map((option) => option.name).join('/');\n                selectedOptions.map((option) => {\n                    this.cascaderValue.push(option.id)\n                })\n            },\n            onSubmit() {\n                if (this.cascaderValue.length > 0){\n                    this.$put(\"/user\",\n                        {\n                            id: this.user.id,\n                            \"deptId\": this.cascaderValue[0],\n                            \"classId\": this.cascaderValue[1],\n                            \"username\": this.username,\n                            \"phone\": this.phone,\n                            'sex' : this.sex\n                        })\n                    .then(res => {\n                        this.$get(\"/user/\" + this.user.id)\n                        .then((rs) => {\n                            sessionStorage.setItem(\"user\", JSON.stringify(rs.data.user))\n                            this.setUser(JSON.parse(sessionStorage.getItem(\"user\")))\n                            this.$msg(res.data.msg,'success')\n                            this.$router.push({name:'mHome'})\n                        })\n                    })\n                }else {\n                    this.$msg(\"请选择学校\",\"error\")\n                }\n            },\n\n        },\n        created() {\n            this.setUser(JSON.parse(sessionStorage.getItem(\"user\")))\n            this.$get(\"/school/\" + this.user.school.id)\n            .then((res) => {\n                this.dept = res.data.school.depts\n                // console.log(this.dept)\n            })\n        }\n    }\n</script>\n\n<style scoped>\n    .perfectInformation{\n        height: 100vh;\n        background: white;\n    }\n    .perfectInformation h3{\n        text-align: center;background: white;padding: 15px;font-weight: normal;border-bottom: 1px solid rgb(237 237 237)\n    }\n    /deep/ .van-field__label{\n        width: 3.5em;\n    }\n</style>"]}]}