{"remainingRequest":"D:\\project\\campus-running-system\\校园帮api+web\\campus-gang-web-master\\campus-gang-web-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\campus-running-system\\校园帮api+web\\campus-gang-web-master\\campus-gang-web-master\\src\\views\\admin\\children\\Role.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\project\\campus-running-system\\校园帮api+web\\campus-gang-web-master\\campus-gang-web-master\\src\\views\\admin\\children\\Role.vue","mtime":1711955954975},{"path":"D:\\project\\campus-running-system\\校园帮api+web\\campus-gang-web-master\\campus-gang-web-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710552180000},{"path":"D:\\project\\campus-running-system\\校园帮api+web\\campus-gang-web-master\\campus-gang-web-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1710552180000},{"path":"D:\\project\\campus-running-system\\校园帮api+web\\campus-gang-web-master\\campus-gang-web-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710552180000},{"path":"D:\\project\\campus-running-system\\校园帮api+web\\campus-gang-web-master\\campus-gang-web-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1710552184000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBNZXNzYWdlQm94LCBUcmFuc2ZlciB9IGZyb20gJ2VsZW1lbnQtdWknOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogIlJvbGUiLA0KDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHJvbGVzOiBbXSwNCiAgICAgICAgICAgIGlucHV0OiAnJywNCiAgICAgICAgICAgIHNlbGVjdDogJzEnLA0KICAgICAgICAgICAgZm9ybToge30sDQogICAgICAgICAgICAvLyBUcmFuc2ZlciDnu4Tku7bnmoTmlbDmja7mupANCiAgICAgICAgICAgIHRyYW5zZmVyRGF0YTogW10sDQogICAgICAgICAgICAvLyBUcmFuc2ZlciDnu4Tku7bnmoTlt7LpgInpobkNCiAgICAgICAgICAgIHNlbGVjdGVkRGF0YTogW10NCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBtZXRob2RzOiB7DQoNCiAgICAgICAgLy/nlKjmiLfliIbphY3lvLnnqpcNCiAgICAgICAgb3BlblRyYW5zZmVyRGlhbG9nKCkgew0KICAgICAgICAgICAgLy8g5by55Ye6IE1lc3NhZ2VCb3gg5by55qGGDQogICAgICAgICAgICBNZXNzYWdlQm94KHsNCiAgICAgICAgICAgICAgICB0aXRsZTogJ+mAieaLqeeUqOaItycsDQogICAgICAgICAgICAgICAgbWVzc2FnZTogY3JlYXRlRWxlbWVudCgnZGl2Jywge30sIFsNCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRWxlbWVudChUcmFuc2Zlciwgew0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDkvKDlhaUgVHJhbnNmZXIg57uE5Lu255qE5bGe5oCnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy50cmFuc2ZlckRhdGEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5YW25LuW5bGe5oCnDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8g55uR5ZCsIFRyYW5zZmVyIOe7hOS7tueahOS6i+S7tg0KICAgICAgICAgICAgICAgICAgICAgICAgb246IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDnm5HlkKzkuovku7YNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICBdKSwNCiAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLA0KICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgICAgICAgICBiZWZvcmVDbG9zZTogKGFjdGlvbiwgaW5zdGFuY2UsIGRvbmUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgLy8g54K55Ye756Gu5a6a5pe255qE5Zue6LCDDQogICAgICAgICAgICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdjb25maXJtJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CG6YCJ5Lit55qE5pWw5o2uDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6YCJ5Lit55qE5pWw5o2uOicsIHRoaXMuc2VsZWN0ZWREYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkb25lKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgY2xpY2tTZWFyY2goKSB7DQogICAgICAgICAgICBsZXQgcGFyYW1ldGVyID0ge307DQogICAgICAgICAgICBpZiAodGhpcy5pbnB1dCkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdCA9PSAxKSB7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlciA9IHsgIm5hbWUiOiB0aGlzLmlucHV0IH07DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyID0geyAia2V5IjogdGhpcy5pbnB1dCB9Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLiRnZXQoIi9yb2xlIiwgcGFyYW1ldGVyKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvbGVzID0gcmVzLmRhdGEucm9sZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dCA9ICIiDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGlzdCgpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQoNCiAgICAgICAgZGVsKGlkKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhpZCk7DQogICAgICAgICAgICB0aGlzLiRkZWwoIi9yb2xlLyIgKyBpZCkNCiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG5vdGlmeU1zZygi5oiQ5YqfIiwgcmVzLmRhdGEubXNnLCAic3VjY2VzcyIpDQogICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGlzdCgpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCg0KICAgICAgICBlZGl0KHJvdykgew0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocm93LnN0YXRlKQ0KICAgICAgICAgICAgaWYgKHJvdy5zdGF0ZSA9PSAwKSB7DQogICAgICAgICAgICAgICAgcm93LnN0YXRlID0gMTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcm93LnN0YXRlID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuJHB1dCgiL3JvbGUiLCB7IGlkOiByb3cuaWQsIHN0YXRlOiByb3cuc3RhdGUgfSkNCiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuJG1zZyhyZXMuZGF0YS5tc2csICJzdWNjZXNzIikNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5TXNnKCLmiJDlip8iLCByZXMuZGF0YS5tc2csICJzdWNjZXNzIikNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaXN0KCkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG5vdGlmeU1zZygi5aSx6LSlIiwgcmVzLmRhdGEubXNnLCAiZXJyb3IiKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQoNCiAgICAgICAgLy/nvJbovpHop5LoibINCiAgICAgICAgLyoqIOS/ruaUueaMiemSruaTjeS9nCAqLw0KICAgICAgICBoYW5kbGVVcGRhdGUoYSwgYikgew0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYik7DQogICAgICAgICAgICB0aGlzLiRnZXQoIi9yb2xlLyIgKyBiLmlkKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmZvcm0gPSByZXMuZGF0YS5yb2xlOw0KICAgICAgICAgICAgICAgIHRoaXMub3BlbiA9IHRydWU7DQogICAgICAgICAgICAgICAgdGhpcy50aXRsZSA9ICLkv67mlLnop5LoibIiOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgLy8g5Y+W5raI5oyJ6ZKuDQogICAgICAgIGNhbmNlbCgpIHsNCiAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlOw0KICAgICAgICB9LA0KDQogICAgICAgIC8v5Yig6Zmk6KeS6ImyDQogICAgICAgIGhhbmRsZURlbGV0ZShhLCBiKSB7DQogICAgICAgICAgICBpZiAoYi5pZCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kZGVsKCIvcm9sZS8iICsgYi5pZCkNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5TXNnKCLmiJDlip8iLCByZXMuZGF0YS5tc2csICJzdWNjZXNzIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGlzdCgpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQoNCiAgICAgICAgLy/liIbphY3mnYPpmZANCg0KDQoNCiAgICAgICAgbmV3TGlzdCgpIHsNCiAgICAgICAgICAgIHRoaXMuJGdldCgiL3JvbGUiKQ0KICAgICAgICAgICAgICAgIC50aGVuKChycykgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJvbGVzID0gcnMuZGF0YS5yb2xlDQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucm9sZXMpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICB9LA0KDQoNCg0KICAgIGNyZWF0ZWQoKSB7DQogICAgICAgIHRoaXMubmV3TGlzdCgpDQogICAgfSwNCg0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIGRhdGFMaXN0KCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMucm9sZXMubWFwKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgIGlkOiBpdGVtLmlkLA0KICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsDQogICAgICAgICAgICAgICAgICAgIGtleTogaXRlbS5rZXksDQogICAgICAgICAgICAgICAgICAgIG9yZGVyOiBpdGVtLm9yZGVyDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KDQo="},{"version":3,"sources":["Role.vue"],"names":[],"mappings":";AAqEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Role.vue","sourceRoot":"src/views/admin/children","sourcesContent":["<template>\r\n    <div class=\"content\">\r\n\r\n        <el-table :data=\"roles\" :resizable=\"false\" style=\"width: 100%  \">\r\n            <el-table-column prop=\"name\" label=\"角色名称\" min-width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"key\" label=\"角色标识\" min-width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"order\" label=\"角色排序\" min-width=\"80\">\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"禁用角色\" min-width=\"90\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-switch :value=\"scope.row.state == 1\" active-color=\"#13ce66\" inactive-color=\"#ff4949\"\r\n                        @change=\"edit(scope.row)\">\r\n                    </el-switch>\r\n                </template>\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"操作\" min-width=\"150\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button class=\"hvr-push\" icon=\"el-icon-edit\" size=\"mini\"\r\n                        @click=\"handleUpdate(scope.$index, scope.row)\">编辑\r\n                    </el-button>\r\n\r\n                    <!-- <el-button\r\n                            icon=\"el-icon-delete\"\r\n                            size=\"mini\"\r\n                            type=\"danger\"\r\n                            @click=\"handleDelete(scope.$index, scope.row)\">删除\r\n                    </el-button> -->\r\n\r\n                    <el-button class=\"hvr-push\" icon=\"el-icon-setting\" size=\"mini\" @click=\"openTransferDialog\">用户分配\r\n                    </el-button>\r\n                </template>\r\n            </el-table-column>\r\n\r\n            <!-- ------------新加入---------- -->\r\n\r\n\r\n            <!-- 添加或修改学生管理对话框 -->\r\n            <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\r\n                <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n                    <el-form-item label=\"排序\" prop=\"order\">\r\n                        <el-input placeholder=\"请输入排序\" v-model=\"form.order\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"角色名称\" prop=\"name\">\r\n                        <el-input v-model=\"form.name\" placeholder=\"请输入学校\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"角色标识\" prop=\"key\">\r\n                        <el-input v-model=\"form.key\" placeholder=\"请输入角色标识\" />\r\n                    </el-form-item>\r\n                </el-form>\r\n                <div slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button type=\"primary\" @click=\"submit()\">确 定</el-button>\r\n                    <el-button @click=\"cancel\">取 消</el-button>\r\n                </div>\r\n            </el-dialog>\r\n\r\n        </el-table>\r\n\r\n        <el-transfer filterable :filter-method=\"filterMethod\" filter-placeholder=\"请输入用户名称\" v-model=\"value\"\r\n            :data=\"roles\">\r\n        </el-transfer>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { MessageBox, Transfer } from 'element-ui';\r\n\r\nexport default {\r\n    name: \"Role\",\r\n\r\n    data() {\r\n        return {\r\n            roles: [],\r\n            input: '',\r\n            select: '1',\r\n            form: {},\r\n            // Transfer 组件的数据源\r\n            transferData: [],\r\n            // Transfer 组件的已选项\r\n            selectedData: []\r\n        }\r\n    },\r\n\r\n    methods: {\r\n\r\n        //用户分配弹窗\r\n        openTransferDialog() {\r\n            // 弹出 MessageBox 弹框\r\n            MessageBox({\r\n                title: '选择用户',\r\n                message: createElement('div', {}, [\r\n                    createElement(Transfer, {\r\n                        props: {\r\n                            // 传入 Transfer 组件的属性\r\n                            data: this.transferData,\r\n                            // 其他属性\r\n                        },\r\n                        // 监听 Transfer 组件的事件\r\n                        on: {\r\n                            // 监听事件\r\n                        }\r\n                    })\r\n                ]),\r\n                showCancelButton: true,\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                beforeClose: (action, instance, done) => {\r\n                    // 点击确定时的回调\r\n                    if (action === 'confirm') {\r\n                        // 处理选中的数据\r\n                        console.log('选中的数据:', this.selectedData);\r\n                    }\r\n                    done();\r\n                }\r\n            });\r\n        },\r\n\r\n        clickSearch() {\r\n            let parameter = {};\r\n            if (this.input) {\r\n                if (this.select == 1) {\r\n                    parameter = { \"name\": this.input };\r\n                } else {\r\n                    parameter = { \"key\": this.input };\r\n                }\r\n                this.$get(\"/role\", parameter)\r\n                    .then((res) => {\r\n                        this.roles = res.data.role\r\n                        this.input = \"\"\r\n                    })\r\n            } else {\r\n                this.newList()\r\n            }\r\n        },\r\n\r\n        del(id) {\r\n            console.log(id);\r\n            this.$del(\"/role/\" + id)\r\n                .then((res) => {\r\n                    this.$notifyMsg(\"成功\", res.data.msg, \"success\")\r\n                    this.newList()\r\n                })\r\n        },\r\n\r\n        edit(row) {\r\n            // console.log(row.state)\r\n            if (row.state == 0) {\r\n                row.state = 1;\r\n            } else {\r\n                row.state = 0;\r\n            }\r\n            this.$put(\"/role\", { id: row.id, state: row.state })\r\n                .then((res) => {\r\n                    // this.$msg(res.data.msg, \"success\")\r\n                    this.$notifyMsg(\"成功\", res.data.msg, \"success\")\r\n                    this.newList()\r\n                })\r\n                .catch((err) => {\r\n                    this.$notifyMsg(\"失败\", res.data.msg, \"error\")\r\n                })\r\n        },\r\n\r\n        //编辑角色\r\n        /** 修改按钮操作 */\r\n        handleUpdate(a, b) {\r\n            // console.log(b);\r\n            this.$get(\"/role/\" + b.id).then((res) => {\r\n                this.form = res.data.role;\r\n                this.open = true;\r\n                this.title = \"修改角色\";\r\n            });\r\n        },\r\n\r\n        // 取消按钮\r\n        cancel() {\r\n            this.open = false;\r\n        },\r\n\r\n        //删除角色\r\n        handleDelete(a, b) {\r\n            if (b.id != null) {\r\n                this.$del(\"/role/\" + b.id)\r\n                    .then((res) => {\r\n                        this.$notifyMsg(\"成功\", res.data.msg, \"success\")\r\n                        this.newList()\r\n                    })\r\n            }\r\n        },\r\n\r\n        //分配权限\r\n\r\n\r\n\r\n        newList() {\r\n            this.$get(\"/role\")\r\n                .then((rs) => {\r\n                    this.roles = rs.data.role\r\n                    console.log(this.roles)\r\n                })\r\n        },\r\n    },\r\n\r\n\r\n\r\n    created() {\r\n        this.newList()\r\n    },\r\n\r\n    computed: {\r\n        dataList() {\r\n            return this.roles.map(item => {\r\n                return {\r\n                    id: item.id,\r\n                    name: item.name,\r\n                    key: item.key,\r\n                    order: item.order\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.content {\r\n    padding: 0 1%;\r\n}\r\n</style>"]}]}